(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],l=0,f=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},o=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-54a49a34":"a2155428"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],r=a[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var r=a[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,r[1](u)}a[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=u;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"9c0c":function(t,e,r){},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("ce5b"),o=r.n(a);r("bf40"),r("5363");n["default"].use(o.a,{iconfont:"mdi",theme:{dark:!0}});var i={},s=new o.a(i),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{app:"",dark:""}},[r("v-layout",{attrs:{column:""}},[r("v-app-bar",{attrs:{dense:"",dark:""}},[r("v-toolbar-title",[t._v(t._s(t.title))]),r("v-spacer"),t.isAuth?r("v-btn",{attrs:{icon:"",title:"logout"},on:{click:t.exit}},[r("v-icon",[t._v("mdi-exit-to-app")])],1):t._e()],1),r("v-content",[r("router-view")],1)],1)],1)},u=[],l=(r("45fc"),r("d4ec")),p=r("bee2"),f=r("262e"),h=r("2caf"),d=r("9ab4"),v=r("60a3"),g=r("4bb5"),b=Object(g["a"])("Auth"),m=Object(g["a"])("User"),y=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(){var t;return Object(l["a"])(this,r),t=e.apply(this,arguments),t.title="Main page",t.otherUser={link:"https://images-na.ssl-images-amazon.com/images/M/MV5BNTk2OGU4NzktODhhOC00Nzc2LWIyNzYtOWViMjljZGFiNTMxXkEyXkFqcGdeQXVyMTE1NTQwOTk@._V1_UY256_CR12,0,172,256_AL_.jpg",newName:"Иван Иванов",userId:255},t}return Object(p["a"])(r,[{key:"exit",value:function(){this.logout(this.currentUserId),this.clearDataUser(this.currentUserId),this.$router.push({name:"Home"})}},{key:"test",value:function(t){"/chat"===t.path?this.title="Chat page":this.title="Main page"}},{key:"mounted",value:function(){this.setDataUser(this.otherUser),this.updateAuth({greeting:"Hi ".concat(this.otherUser.newName,"!"),userId:this.otherUser.userId})}},{key:"currentUserId",get:function(){return this.$route.query.id?this.$route.query.id:null}},{key:"isAuth",get:function(){var t=this;return this.currentUserId&&Boolean(this.listAuth.length)&&this.listAuth.some((function(e){return String(e.userId)===String(t.currentUserId)}))}}]),r}(v["c"]);Object(d["a"])([b.State],y.prototype,"listAuth",void 0),Object(d["a"])([m.State],y.prototype,"listUsers",void 0),Object(d["a"])([b.Action],y.prototype,"logout",void 0),Object(d["a"])([m.Action],y.prototype,"clearDataUser",void 0),Object(d["a"])([m.Action],y.prototype,"setDataUser",void 0),Object(d["a"])([b.Action],y.prototype,"updateAuth",void 0),Object(d["a"])([Object(v["d"])("$route",{immediate:!1,deep:!0})],y.prototype,"test",null),y=Object(d["a"])([v["a"]],y);var j=y,O=j,k=(r("5c0b"),r("2877")),U=Object(k["a"])(O,c,u,!1,null,null,null),w=U.exports,A=r("9483");Object(A["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});r("d3b7");var I=r("8c4f"),x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[r("v-card",{staticClass:"elevation-12 mt-10"},[r("v-toolbar",{attrs:{dark:"",flat:""}},[r("v-toolbar-title",[t._v("Login form")])],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{label:"Enter your nick name",name:"nick","prepend-icon":"mdi-account-box",type:"text"},model:{value:t.nick,callback:function(e){t.nick="string"===typeof e?e.trim():e},expression:"nick"}}),r("v-text-field",{attrs:{label:"Paste link for your avatar",name:"avatar","prepend-icon":"mdi-file-image",type:"text"},model:{value:t.avatar,callback:function(e){t.avatar="string"===typeof e?e.trim():e},expression:"avatar"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:t.logIn}},[t._v("Login")])],1)],1),t.error?[r("v-alert",{staticClass:"mt-5",attrs:{type:"error"}},[t._v(" "+t._s(t.messageError)+" ")])]:t._e()],2)],1)},M=[],S=(r("96cf"),r("1da1")),_=Object(g["a"])("Auth"),D=Object(g["a"])("User"),E=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(){var t;return Object(l["a"])(this,r),t=e.apply(this,arguments),t.nick="",t.avatar="",t.messageError="",t.id=Math.ceil(100*Math.random()),t.error=!1,t}return Object(p["a"])(r,[{key:"logIn",value:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=/(http(s?):)(.*?)*\.(?:jpg|gif|png|jpeg)/gi,this.error=!1,this.nick.length){t.next=6;break}return this.messageError="Enter your nick name!",this.error=!0,t.abrupt("return");case 6:if(e.test(this.avatar)){t.next=10;break}return this.messageError="Invalid link for image url!",this.error=!0,t.abrupt("return");case 10:return this.setDataUser({newName:this.nick,link:this.avatar,userId:this.id}),this.updateAuth({greeting:"Hi ".concat(this.nick,"!"),userId:this.id}),t.next=14,this.$nextTick();case 14:this.$router.push("/chat?id=".concat(this.id));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),r}(v["c"]);Object(d["a"])([D.Action],E.prototype,"setDataUser",void 0),Object(d["a"])([_.Action],E.prototype,"updateAuth",void 0),E=Object(d["a"])([v["a"]],E);var T=E,N=T,P=Object(k["a"])(N,x,M,!1,null,null,null),C=P.exports;n["default"].use(I["a"]);var $=[{path:"/",name:"Home",component:C},{path:"/chat",name:"Chat",component:function(){return r.e("chunk-54a49a34").then(r.bind(null,"8c25"))}}],B=new I["a"]({mode:"history",base:"/",routes:$}),L=B,q=r("2f62"),F=(r("4de4"),r("7db0"),r("25f0"),r("9911"),r("6fc5"));F["e"].rawError=!0;var z=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(){var t;return Object(l["a"])(this,r),t=e.apply(this,arguments),t.listUsers=[],t}return Object(p["a"])(r,[{key:"clearStateDataUser",value:function(t){this.listUsers.length&&this.listUsers[0].userId&&(this.listUsers=this.listUsers.filter((function(e){return e.userId.toString()!==t.toString()})))}},{key:"setToStateDataUser",value:function(t){this.listUsers.push({name:t.newName,avatar:t.link,userId:t.userId})}},{key:"setDataUser",value:function(t){this.context.commit("setToStateDataUser",t)}},{key:"clearDataUser",value:function(t){this.context.commit("clearStateDataUser",t)}},{key:"userById",get:function(){var t=this;return function(e){return t.listUsers.length?t.listUsers.find((function(t){return t.userId===e})):{}}}}]),r}(F["d"]);Object(d["a"])([F["c"]],z.prototype,"clearStateDataUser",null),Object(d["a"])([F["c"]],z.prototype,"setToStateDataUser",null),Object(d["a"])([F["a"]],z.prototype,"setDataUser",null),Object(d["a"])([F["a"]],z.prototype,"clearDataUser",null),z=Object(d["a"])([Object(F["b"])({namespaced:!0})],z);var H=z;F["e"].rawError=!0;var V=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(){var t;return Object(l["a"])(this,r),t=e.apply(this,arguments),t.listAuth=[],t}return Object(p["a"])(r,[{key:"setAuth",value:function(t){this.listAuth.push({isAuth:!0,greeting:t.greeting,userId:t.userId})}},{key:"logoutUser",value:function(t){this.listAuth.length&&this.listAuth[0].userId&&(this.listAuth=this.listAuth.filter((function(e){return e.userId.toString()!==t.toString()})))}},{key:"updateAuth",value:function(t){this.context.commit("setAuth",t)}},{key:"logout",value:function(t){this.context.commit("logoutUser",t)}}]),r}(F["d"]);Object(d["a"])([F["c"]],V.prototype,"setAuth",null),Object(d["a"])([F["c"]],V.prototype,"logoutUser",null),Object(d["a"])([F["a"]],V.prototype,"updateAuth",null),Object(d["a"])([F["a"]],V.prototype,"logout",null),V=Object(d["a"])([Object(F["b"])({namespaced:!0})],V);var G=V,R=(r("d81d"),r("5530"));F["e"].rawError=!0;var X=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(){var t;return Object(l["a"])(this,r),t=e.apply(this,arguments),t.listMessage=[],t}return Object(p["a"])(r,[{key:"setStateMessage",value:function(t){this.listMessage.push({fromUserId:t.fromUserId,toUserId:t.toUserId,message:t.message,time:t.time})}},{key:"setMessage",value:function(t){this.context.commit("setStateMessage",t)}},{key:"getAll",get:function(){return this.listMessage}},{key:"getByFromUserId",get:function(){var t=this;return function(e){return t.listMessage.length?t.listMessage.map((function(t){if(t.fromUserId===e)return Object(R["a"])(Object(R["a"])({},t),{},{type:"outgoing"})})).filter((function(t){return"undefined"!==typeof t})):[]}}},{key:"getByToUserId",get:function(){var t=this;return function(e){return t.listMessage.length?t.listMessage.map((function(t){if(t.toUserId===e)return Object(R["a"])(Object(R["a"])({},t),{},{type:"incoming"})})).filter((function(t){return"undefined"!==typeof t})):[]}}}]),r}(F["d"]);Object(d["a"])([F["c"]],X.prototype,"setStateMessage",null),Object(d["a"])([F["a"]],X.prototype,"setMessage",null),X=Object(d["a"])([Object(F["b"])({namespaced:!0})],X);var J=X;n["default"].use(q["a"]);var Q=new q["a"].Store({modules:{User:H,Auth:G,Msg:J}}),W=Q;n["default"].config.productionTip=!1,new n["default"]({router:L,store:W,vuetify:s,render:function(t){return t(w)}}).$mount("#app")}});
//# sourceMappingURL=app.14f8373a.js.map