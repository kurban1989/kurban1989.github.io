(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54a49a34"],{5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),s="["+n+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,r){var a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var s,i;return n&&"function"==typeof(s=e.constructor)&&s!==r&&a(i=s.prototype)&&i!==r.prototype&&n(t,i),t}},"8c25":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex flex relative h-100",class:{"message__double-screen":t.double}},[r("chat",{attrs:{double:!1}}),r("chat",{attrs:{"current-other-id":255,double:t.double}})],1)},n=[],s=r("d4ec"),i=r("262e"),o=r("2caf"),c=r("9ab4"),u=r("60a3"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex flex relative h-100 chat"},[t.user?[r("v-navigation-drawer",{staticClass:"inline-f",attrs:{dark:"","mini-variant":t.mini,permanent:""},on:{"update:miniVariant":function(e){t.mini=e},"update:mini-variant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list-item",{staticClass:"px-2"},[r("v-list-item-avatar",[r("img",{attrs:{src:t.user.avatar}})]),r("v-list-item-title",[t._v(t._s(t.user.name))]),r("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[r("v-icon",[t._v("mdi-chevron-left")])],1)],1),r("v-divider"),r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",[t._v("mdi-account-multiple")])],1),r("v-list-item-title",[t._v("Contacts")])],1),r("v-divider"),t._l(t.listUsers,(function(e){return[r("v-list-item",{key:e.userId,staticClass:"px-0",attrs:{link:""},on:{click:function(r){return t.addTo(e.userId,e.name)}}},[r("v-list-item-avatar",[r("img",{attrs:{src:e.avatar}})]),r("v-list-item-content",[r("v-list-item-title",{staticClass:"inline-f"},[t._v(t._s(e.name))]),t.userTo===e.userId?r("v-icon",{staticClass:"inline-f",attrs:{right:"",size:"16"}},[t._v("mdi-marker")]):t._e()],1)],1)]}))],2)],1)]:t._e(),r("Messangers",{staticClass:"inline-f column w-100",class:{"box-message-other":t.double},attrs:{"current-id":t.currentUserId}},[t.showTextArea?r("v-container",{attrs:{fluid:"",dark:""}},[r("v-textarea",{attrs:{name:"add-message",filled:"",label:"Write here you message for "+t.userToName,"auto-grow":""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),r("div",{staticClass:"control-textarea"},[r("v-btn",{attrs:{color:"primary",dark:"",md:""},on:{click:t.send}},[t._v("Send message")]),r("v-spacer"),r("v-btn",{staticStyle:{background:"rgba(3, 169, 244, .4)"},attrs:{color:"secondary",icon:"",title:"collapse textarea"},on:{click:t.collapse}},[r("v-icon",[t._v("mdi-arrow-collapse-down")])],1)],1)],1):t._e()],1),r("v-snackbar",{attrs:{right:"",timeout:4100},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.greeting)+" "),r("v-btn",{attrs:{color:"blue"},on:{click:function(e){t.snackbar=!1}}},[t._v(" Close ")])],1)],2)},d=[],v=(r("7db0"),r("45fc"),r("a9e3"),r("bee2")),f=r("4bb5"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._b({},"div",t.$attrs,!1),[r("div",{staticClass:"message"},t._l(t.history,(function(e){return r("div",{key:e.time+Math.random(),staticClass:"message__card",class:"message__card--"+e.type},[r("div",{staticClass:"message__avatar",class:"message__avatar--"+e.type},[r("img",{attrs:{src:t.getImg(e.fromUserId),alt:""}})]),r("div",{staticClass:"message__cotainer",class:"message__cotainer--"+e.type},[t._v(" "+t._s(e.message)+" "),r("time",{staticClass:"message__time",class:"message__time--"+e.type,attrs:{datetime:new Date(e.time).toLocaleDateString("en",t.optionDate)}},[t._v(" "+t._s(new Date(e.time).toLocaleDateString("en",t.optionDate))+" ")])])])})),0),t._t("default")],2)},b=[],g=(r("99af"),r("b64b"),r("53ca")),h=Object(f["a"])("Msg"),p=Object(f["a"])("User"),y=function(t){Object(i["a"])(r,t);var e=Object(o["a"])(r);function r(){var t;return Object(s["a"])(this,r),t=e.apply(this,arguments),t.optionDate={month:"long",weekday:"long",day:"numeric"},t}return Object(v["a"])(r,[{key:"isEmpty",value:function(t){return"object"===Object(g["a"])(t)&&!Array.isArray(t)&&0===Object.keys(t).length}},{key:"getImg",value:function(t){var e=this.userById(Number(t));return this.isEmpty(e)?"":e.avatar}},{key:"incoming",get:function(){var t=this.getByToUserId(Number(this.currentId));return t}},{key:"outgoing",get:function(){var t=this.getByFromUserId(Number(this.currentId));return t}},{key:"history",get:function(){var t=this.incoming.concat(this.outgoing);return t.sort((function(t,e){return t.time>e.time?1:t.time<e.time?-1:0}))}}]),r}(u["c"]);Object(c["a"])([Object(u["b"])()],y.prototype,"currentId",void 0),Object(c["a"])([h.Getter("getByToUserId")],y.prototype,"getByToUserId",void 0),Object(c["a"])([h.Getter("getByFromUserId")],y.prototype,"getByFromUserId",void 0),Object(c["a"])([h.Getter("getAll")],y.prototype,"messages",void 0),Object(c["a"])([p.Getter("userById")],y.prototype,"userById",void 0),y=Object(c["a"])([u["a"]],y);var _=y,I=_,O=r("2877"),k=Object(O["a"])(I,m,b,!1,null,null,null),j=k.exports,x=Object(f["a"])("Auth"),w=Object(f["a"])("User"),N=Object(f["a"])("Msg"),A=function(t){Object(i["a"])(r,t);var e=Object(o["a"])(r);function r(){var t;return Object(s["a"])(this,r),t=e.apply(this,arguments),t.snackbar=!1,t.drawer=!0,t.mini=!0,t.showTextArea=!1,t.userTo=NaN,t.text="",t.userToName="",t}return Object(v["a"])(r,[{key:"send",value:function(){this.text.length>1&&(this.setMessage({fromUserId:Number(this.currentUserId),toUserId:this.userTo,message:this.text,time:Date.now()}),this.text="")}},{key:"collapse",value:function(){this.showTextArea=!1}},{key:"addTo",value:function(t,e){this.showTextArea=!0,this.userTo=t,this.userToName=e}},{key:"mounted",value:function(){this.isAuth?this.snackbar=!0:this.$router.push({name:"Home"})}},{key:"currentUserId",get:function(){return this.currentOtherId?this.currentOtherId:this.$route.query.id||0}},{key:"isAuth",get:function(){var t=this;return this.currentUserId&&Boolean(this.listAuth.length)&&this.listAuth.some((function(e){return String(e.userId)===String(t.currentUserId)}))}},{key:"greetingTest",get:function(){var t=this;return this.listAuth.find((function(e){return String(e.userId)===String(t.currentUserId)}))||null}},{key:"greeting",get:function(){return this.greetingTest?this.greetingTest.greeting:""}},{key:"user",get:function(){var t=this;return this.listUsers.find((function(e){return String(e.userId)===String(t.currentUserId)}))||null}}]),r}(u["c"]);Object(c["a"])([Object(u["b"])()],A.prototype,"currentOtherId",void 0),Object(c["a"])([Object(u["b"])()],A.prototype,"double",void 0),Object(c["a"])([w.State],A.prototype,"listUsers",void 0),Object(c["a"])([x.State],A.prototype,"listAuth",void 0),Object(c["a"])([N.Action],A.prototype,"setMessage",void 0),A=Object(c["a"])([Object(u["a"])({components:{Messangers:j}})],A);var T=A,U=T,C=Object(O["a"])(U,l,d,!1,null,null,null),E=C.exports,S=function(t){Object(i["a"])(r,t);var e=Object(o["a"])(r);function r(){var t;return Object(s["a"])(this,r),t=e.apply(this,arguments),t.double=!0,t}return r}(u["c"]);S=Object(c["a"])([Object(u["a"])({components:{Chat:E}})],S);var M=S,B=M,F=Object(O["a"])(B,a,n,!1,null,null,null);e["default"]=F.exports},"99af":function(t,e,r){"use strict";var a=r("23e7"),n=r("d039"),s=r("e8b5"),i=r("861d"),o=r("7b0b"),c=r("50c4"),u=r("8418"),l=r("65f0"),d=r("1dde"),v=r("b622"),f=r("2d00"),m=v("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",h=f>=51||!n((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),p=d("concat"),y=function(t){if(!i(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)},_=!h||!p;a({target:"Array",proto:!0,forced:_},{concat:function(t){var e,r,a,n,s,i=o(this),d=l(i,0),v=0;for(e=-1,a=arguments.length;e<a;e++)if(s=-1===e?i:arguments[e],y(s)){if(n=c(s.length),v+n>b)throw TypeError(g);for(r=0;r<n;r++,v++)r in s&&u(d,v,s[r])}else{if(v>=b)throw TypeError(g);u(d,v++,s)}return d.length=v,d}})},a9e3:function(t,e,r){"use strict";var a=r("83ab"),n=r("da84"),s=r("94ca"),i=r("6eeb"),o=r("5135"),c=r("c6b6"),u=r("7156"),l=r("c04e"),d=r("d039"),v=r("7c73"),f=r("241c").f,m=r("06cf").f,b=r("9bf2").f,g=r("58a8").trim,h="Number",p=n[h],y=p.prototype,_=c(v(y))==h,I=function(t){var e,r,a,n,s,i,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=g(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+u}for(s=u.slice(2),i=s.length,o=0;o<i;o++)if(c=s.charCodeAt(o),c<48||c>n)return NaN;return parseInt(s,a)}return+u};if(s(h,!p(" 0o1")||!p("0b1")||p("+0x1"))){for(var O,k=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof k&&(_?d((function(){y.valueOf.call(r)})):c(r)!=h)?u(new p(I(e)),r,k):I(e)},j=a?f(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;j.length>x;x++)o(p,O=j[x])&&!o(k,O)&&b(k,O,m(p,O));k.prototype=y,y.constructor=k,i(n,h,k)}}}]);
//# sourceMappingURL=chunk-54a49a34.a2155428.js.map